{
  "openapi": "3.0.0",
  "info": {
    "title": "StyleHub API",
    "version": "1.0.0",
    "description": "API para la tienda StyleHub - productos, categorías, carrito y pedidos"
  },
  "servers": [
    { "url": "http://localhost:5000/api" }
  ],
  "components": {
    "securitySchemes": {
      "bearerAuth": { "type": "http", "scheme": "bearer", "bearerFormat": "JWT" }
    },
    "schemas": {
      "User": { "type": "object", "properties": { "id": { "type": "integer" }, "email": { "type": "string" }, "name": { "type": "string" } } },
      "Product": { "type": "object", "properties": { "id": { "type": "integer" }, "name": { "type": "string" }, "description": { "type": "string" }, "price": { "type": "number" }, "stock": { "type": "integer" }, "categoryId": { "type": "integer" } } },
      "Category": { "type": "object", "properties": { "id": { "type": "integer" }, "name": { "type": "string" } } },
      "Cart": { "type": "object", "properties": { "id": { "type": "integer" }, "userId": { "type": "integer" }, "items": { "type": "array", "items": { "$ref": "#/components/schemas/CartItem" } } } },
      "CartItem": { "type": "object", "properties": { "id": { "type": "integer" }, "productId": { "type": "integer" }, "quantity": { "type": "integer" }, "product": { "$ref": "#/components/schemas/Product" } } },
      "Order": { "type": "object", "properties": { "id": { "type": "integer" }, "userId": { "type": "integer" }, "total": { "type": "number" }, "status": { "type": "string" }, "items": { "type": "array", "items": { "$ref": "#/components/schemas/OrderItem" } } } },
      "OrderItem": { "type": "object", "properties": { "id": { "type": "integer" }, "productId": { "type": "integer" }, "quantity": { "type": "integer" }, "price": { "type": "number" } } }
    }
  },
  "paths": {
    "/auth/register": {
      "post": {
        "tags": ["Auth"],
        "requestBody": { "required": true, "content": { "application/json": { "schema": { "type": "object", "properties": { "name": { "type": "string" }, "email": { "type": "string" }, "password": { "type": "string" } }, "required": ["email","password"] } } } },
        "responses": { "201": { "description": "Usuario creado" } }
      }
    },
    "/auth/login": {
      "post": {
        "tags": ["Auth"],
        "requestBody": { "required": true, "content": { "application/json": { "schema": { "type": "object", "properties": { "email": { "type": "string" }, "password": { "type": "string" } }, "required": ["email","password"] } } } },
        "responses": { "200": { "description": "Token JWT" } }
      }
    },
    "/auth/profile": {
      "get": { "tags": ["Auth"], "security": [{ "bearerAuth": [] }], "responses": { "200": { "description": "Perfil de usuario" } } }
    },
    "/products": {
      "get": { "tags": ["Products"], "parameters": [{ "name": "page", "in": "query", "schema": { "type": "integer" } }, { "name": "perPage", "in": "query", "schema": { "type": "integer" } }], "responses": { "200": { "description": "Listado de productos" } } },
      "post": { "tags": ["Products"], "security": [{ "bearerAuth": [] }], "requestBody": { "required": true, "content": { "application/json": { "schema": { "$ref": "#/components/schemas/Product" } } } }, "responses": { "201": { "description": "Producto creado" } } }
    },
    "/products/{id}": {
      "get": { "tags": ["Products"], "parameters": [{ "name":"id","in":"path","required":true,"schema":{"type":"integer"}}], "responses": { "200": { "description": "Producto" } } },
      "put": { "tags": ["Products"], "security": [{ "bearerAuth": [] }], "parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer"}}], "requestBody": { "content": { "application/json": { "schema": { "$ref": "#/components/schemas/Product" } } } }, "responses": { "200": { "description": "Producto actualizado" } } },
      "delete": { "tags": ["Products"], "security": [{ "bearerAuth": [] }], "parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer"}}], "responses": { "200": { "description": "Producto eliminado" } } }
    },
    "/categories": {
      "get": { "tags": ["Categories"], "responses": { "200": { "description": "Lista categorías" } } },
      "post": { "tags": ["Categories"], "security": [{ "bearerAuth": [] }], "requestBody": { "required": true, "content": { "application/json": { "schema": { "$ref": "#/components/schemas/Category" } } } }, "responses": { "201": { "description": "Categoría creada" } } }
    },
    "/categories/{id}": {
      "put": { "tags": ["Categories"], "security": [{ "bearerAuth": [] }], "parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer"}}], "requestBody": { "content": { "application/json": { "schema": { "$ref": "#/components/schemas/Category" } } } }, "responses": { "200": { "description": "Categoría actualizada" } } },
      "delete": { "tags": ["Categories"], "security": [{ "bearerAuth": [] }], "parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer"}}], "responses": { "200": { "description": "Categoría eliminada" } } }
    },
    "/cart": {
      "get": { "tags": ["Cart"], "security": [{ "bearerAuth": [] }], "responses": { "200": { "description": "Carrito del usuario" } } },
      "post": { "tags": ["Cart"], "security": [{ "bearerAuth": [] }], "requestBody": { "required": true, "content": { "application/json": { "schema": { "type":"object", "properties": { "productId": { "type": "integer" }, "quantity": { "type": "integer" } }, "required":["productId"] } } } }, "responses": { "201": { "description": "Item añadido" } } }
    },
    "/cart/{id}": {
      "put": { "tags": ["Cart"], "security": [{ "bearerAuth": [] }], "parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer"}}], "requestBody": { "content": { "application/json": { "schema": { "type":"object","properties":{"quantity":{"type":"integer"}} } } } }, "responses": { "200": { "description": "Item actualizado" } } },
      "delete": { "tags": ["Cart"], "security": [{ "bearerAuth": [] }], "parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer"}}], "responses": { "200": { "description": "Item eliminado" } } }
    },
    "/orders": {
      "get": { "tags": ["Orders"], "security": [{ "bearerAuth": [] }], "responses": { "200": { "description": "Pedidos del usuario" } } },
      "post": { "tags": ["Orders"], "security": [{ "bearerAuth": [] }], "responses": { "201": { "description": "Pedido creado" } } }
    }
  }
}